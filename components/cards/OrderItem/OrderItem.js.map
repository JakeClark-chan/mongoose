{"version":3,"file":"OrderItem.js","sources":["../../../../src/components/cards/OrderItem/OrderItem.tsx"],"sourcesContent":["import React, { createElement, FC, useEffect, useMemo, useState } from 'react'\nimport clsx from 'clsx'\nimport { kztAmount } from '../../../utils/money'\nimport { Condition } from '../../other/Condition'\nimport { LazyImage } from '../../other/LazyImage'\nimport { Sticker } from '../../other/Sticker'\nimport { Typography } from '../../other/Typography'\nimport { ShowcaseBoxIcon } from '../../icons/ShowcaseBox'\nimport { DigitalIcon } from '../../icons/Digital'\nimport { PercentIcon } from '../../icons/Percent'\nimport { CartItemNextProps, ISticker } from '../CartItemNext/types'\nimport './OrderItem.scss'\n\nconst OrderItem: FC<CartItemNextProps> = ({\n  className,\n  imgIcon,\n  imgSrc = '',\n  imgLqip = 'images/productCardThumbnail.png',\n  oldPrice = 0,\n  price = 0,\n  quantity = 0,\n  stickers = [],\n  title = '',\n  isEsd = false,\n  isShowcase = false,\n  isOutOfStock = false,\n  totalPrice = 0,\n  esdTitle = 'Цифровой товар',\n  showcaseTitle = 'Товар с витрины',\n  isCascade = false,\n  cascadeTitle = 'На товар действует каскадная скидка',\n  link,\n  outOfStockTitle = 'Товара нет в наличии',\n  totalOldPrice = 0,\n}) => {\n  const shouldRenderOldPrice: boolean =\n    totalOldPrice > totalPrice || totalOldPrice > Number(totalPrice)\n  const totalNewOldPrice = totalOldPrice || quantity * oldPrice\n  const totalNewPrice = totalPrice || quantity * price\n  const [qty, setQty] = useState(quantity)\n\n  useEffect(() => {\n    setQty(quantity)\n  }, [quantity])\n\n  const topStickers = useMemo((): ISticker[] => {\n    const stickerList: ISticker[] = []\n\n    if (isCascade) {\n      stickerList.push({\n        backgroundColor: 'transparent',\n        color: 'var(--ui-green)',\n        icon: (\n          <div className='OrderItem__TopStickerIcoPercentWrapper'>\n            <PercentIcon\n              className='OrderItem__TopStickerIco'\n              height={20}\n              width={20}\n            />\n          </div>\n        ),\n        text: cascadeTitle,\n      })\n    }\n\n    if (isEsd) {\n      stickerList.push({\n        backgroundColor: 'transparent',\n        color: 'var(--ui-blue)',\n        icon: (\n          <DigitalIcon\n            className='OrderItem__TopStickerIco'\n            height={20}\n            width={20}\n          />\n        ),\n        text: esdTitle,\n      })\n    }\n\n    if (isShowcase) {\n      stickerList.push({\n        backgroundColor: 'var(--gray-11)',\n        color: 'var(--ui-red)',\n        icon: (\n          <ShowcaseBoxIcon\n            className='OrderItem__TopStickerIco --marginLeft'\n            fill='var(--ui-red)'\n            height={16}\n            width={16}\n          />\n        ),\n        text: showcaseTitle,\n      })\n    }\n\n    if (isOutOfStock) {\n      stickerList.push({\n        backgroundColor: 'var(--brand-yellow)',\n        color: 'var(--gray-90)',\n        text: outOfStockTitle,\n      })\n    }\n\n    return stickerList\n  }, [\n    isCascade,\n    isEsd,\n    isShowcase,\n    isOutOfStock,\n    cascadeTitle,\n    esdTitle,\n    outOfStockTitle,\n    showcaseTitle,\n  ])\n\n  return (\n    <div className={clsx('OrderItem', className)}>\n      <div className='OrderItem__TopSticker'>\n        {topStickers?.map((sticker, stickerIdx) => (\n          <Sticker\n            key={`OrderItem__Sticker-${stickerIdx}`}\n            className='OrderItem__Sticker'\n            {...sticker}\n          />\n        ))}\n        {stickers?.map((sticker, stickerIdx) => (\n          <Sticker\n            key={`OrderItem__Sticker-${stickerIdx}`}\n            className='OrderItem__Sticker'\n            {...sticker}\n          />\n        ))}\n      </div>\n      <div className='OrderItem__FlexWrapper'>\n        <div className='OrderItem__ImgWrapper'>\n          <Condition match={Boolean(link)}>\n            <a {...link}>\n              {imgIcon ? (\n                createElement(imgIcon, {\n                  className: 'OrderItem__Img',\n                })\n              ) : (\n                <LazyImage\n                  alt={title}\n                  className='OrderItem__Img'\n                  lqip={imgLqip}\n                  src={imgSrc}\n                />\n              )}\n            </a>\n          </Condition>\n          <Condition match={!link}>\n            {imgIcon ? (\n              createElement(imgIcon, {\n                className: 'OrderItem__Img',\n              })\n            ) : (\n              <LazyImage\n                alt={title}\n                className='OrderItem__Img'\n                lqip={imgLqip}\n                src={imgSrc}\n              />\n            )}\n          </Condition>\n        </div>\n        <div className='OrderItem__BodyWrapper'>\n          <div className='OrderItem__TextWrapper'>\n            <Typography\n              className='OrderItem__Title'\n              text={title}\n              type='Body2'\n            />\n            {qty > 1 && (\n              <Typography\n                className='CartItemNext__Quantity'\n                text={String(quantity)}\n                type='Subtitle2'\n              />\n            )}\n          </div>\n          <div className='OrderItem__PriceWrapper'>\n            <Typography\n              className={clsx(\n                'OrderItem__Total',\n                shouldRenderOldPrice && '--highlighted',\n              )}\n              text={kztAmount(Number(totalNewPrice))}\n              type='Body1B'\n            />\n            {shouldRenderOldPrice && (\n              <Typography\n                className='OrderItem__OldPriceTotalAmount'\n                text={kztAmount(Number(totalNewOldPrice))}\n                type='Body2None'\n              />\n            )}\n          </div>\n          {qty > 1 && (\n            <Typography\n              className='OrderItem__Price'\n              text={kztAmount(price, '₸/шт')}\n              type='Subtitle2'\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default OrderItem\n"],"names":["className","imgIcon","imgSrc","imgLqip","oldPrice","price","quantity","stickers","title","isEsd","isShowcase","isOutOfStock","totalPrice","esdTitle","showcaseTitle","isCascade","cascadeTitle","link","outOfStockTitle","totalOldPrice","shouldRenderOldPrice","Number","totalNewOldPrice","totalNewPrice","qty","setQty","useState","useEffect","topStickers","useMemo","stickerList","push","backgroundColor","color","icon","React","PercentIcon","height","width","text","DigitalIcon","ShowcaseBoxIcon","fill","clsx","map","sticker","stickerIdx","Sticker","key","Condition","match","Boolean","createElement","LazyImage","alt","lqip","src","Typography","type","String","kztAmount"],"mappings":"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"}