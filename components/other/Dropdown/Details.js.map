{"version":3,"file":"Details.js","sources":["../../../../src/components/other/Dropdown/Details.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions */\nimport React, {\n  FC,\n  useState,\n  useEffect,\n  useCallback,\n  useRef,\n  ReactNode,\n} from 'react'\nimport clsx from 'clsx'\nimport { DetailsProps, Render } from './types'\n\nfunction getRenderer(children): Render {\n  return typeof children === 'function' ? children : (): ReactNode => children\n}\n\nconst Details: FC<DetailsProps> = ({\n  className,\n  children,\n  disabled,\n  render = getRenderer(children),\n  open: userOpen,\n  onClickOutside,\n  onToggle,\n  defaultOpen = false,\n  ...rest\n}) => {\n  const [internalOpen, setInternalOpen] = useState(defaultOpen)\n  const ref = useRef(null)\n  const open = typeof userOpen !== 'undefined' ? userOpen : internalOpen\n\n  const onClickOutsideInternal = useCallback(\n    (event) => {\n      if (event.target.closest('details') !== ref.current) {\n        if (onClickOutside) {\n          onClickOutside(event)\n        }\n        if (!event.defaultPrevented) {\n          setInternalOpen(false)\n        }\n      }\n    },\n    [ref, onClickOutside, setInternalOpen],\n  )\n\n  useEffect(() => {\n    if (open) {\n      document.addEventListener('click', onClickOutsideInternal)\n      return (): void => {\n        document.removeEventListener('click', onClickOutsideInternal)\n      }\n    }\n  }, [open, onClickOutsideInternal])\n\n  function handleToggle(e): void {\n    if (onToggle) {\n      onToggle(e)\n    }\n\n    if (!e.defaultPrevented) {\n      setInternalOpen(e.target.open)\n    }\n  }\n\n  return (\n    <details\n      {...rest}\n      ref={ref}\n      className={clsx('DropdownDetails', className)}\n      onClick={\n        disabled\n          ? (e): void => e.preventDefault()\n          : (e): React.MouseEvent<HTMLElement, MouseEvent> => e\n      }\n      onToggle={handleToggle}\n      open={open}\n    >\n      {render({ open, onToggle: handleToggle })}\n    </details>\n  )\n}\n\nexport default Details\n"],"names":["getRenderer","children","_a","className","disabled","render","open","userOpen","onClickOutside","onToggle","defaultOpen","rest","internalOpen","setInternalOpen","useState","ref","useRef","onClickOutsideInternal","useCallback","event","target","closest","current","defaultPrevented","handleToggle","e","useEffect","document","addEventListener","removeEventListener","React","clsx","onClick","preventDefault"],"mappings":"mKAYA,SAASA,EAAYC,GACnB,MAA2B,mBAAbA,EAA0BA,EAAW,IAAiBA,iBAGnCC,QAAAC,UACjCA,EAASF,SACTA,EAAQG,SACRA,EAAQC,OACRA,EAASL,EAAYC,GACrBK,KAAMC,EAAQC,eACdA,EAAcC,SACdA,EAAQC,YACRA,GAAc,KACXC,aAT8B,+FAWjC,MAAOC,EAAcC,GAAmBC,WAASJ,GAC3CK,EAAMC,SAAO,MACbV,OAA2B,IAAbC,EAA2BA,EAAWK,EAEpDK,EAAyBC,cAC5BC,IACKA,EAAMC,OAAOC,QAAQ,aAAeN,EAAIO,UACtCd,GACFA,EAAeW,GAEZA,EAAMI,kBACTV,GAAgB,KAItB,CAACE,EAAKP,EAAgBK,IAYxB,SAASW,EAAaC,GAChBhB,GACFA,EAASgB,GAGNA,EAAEF,kBACLV,EAAgBY,EAAEL,OAAOd,MAI7B,OAnBAoB,YAAU,KACR,GAAIpB,EAEF,OADAqB,SAASC,iBAAiB,QAASX,GAC5B,KACLU,SAASE,oBAAoB,QAASZ,KAGzC,CAACX,EAAMW,IAaRa,mDACMnB,GACJI,IAAKA,EACLZ,UAAW4B,UAAK,kBAAmB5B,GACnC6B,QACE5B,EACKqB,GAAYA,EAAEQ,iBACdR,GAAiDA,EAExDhB,SAAUe,EACVlB,KAAMA,IAELD,EAAO,CAAEC,KAAAA,EAAMG,SAAUe"}