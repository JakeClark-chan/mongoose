{"version":3,"file":"TagFilterGroup.js","sources":["../../../../src/components/other/TagFilterGroup/TagFilterGroup.tsx"],"sourcesContent":["import React, { FC, useState, useEffect, useRef } from 'react'\nimport clsx from 'clsx'\nimport { Typography } from '../Typography'\nimport { Condition } from '../Condition'\nimport { Button } from '../../buttons'\nimport { LAST_ITEM_BORDER } from './constants'\nimport { ArrowDownNewIcon } from '../../icons/ArrowDownNew'\nimport { Field } from '../../inputs'\nimport { SearchIconNew } from '../../icons'\nimport { TagFilterGroupProps } from './types'\nimport './TagFilterGroup.scss'\n\nconst TagFilterGroup: FC<TagFilterGroupProps> = ({\n  title,\n  id,\n  className,\n  children,\n  isOpenedInit = false,\n  isExpandedInit = false,\n  toggleable = true,\n  hideLabel = 'Свернуть',\n  showAllLabel = 'Показать ещё',\n  searchLabel = 'Поиск',\n  onSearchChange,\n  isSearchVisible = false,\n}) => {\n  const contentRef = useRef<any>(null)\n  const [isOpened, setIsOpened] = useState(\n    !toggleable || isOpenedInit || isExpandedInit,\n  )\n  const [isExpanded, setIsExpanded] = useState(!toggleable || isExpandedInit)\n  const [isExpandButtonHidden, setIsExpandButtonHidden] = useState(true)\n  const [searchValue, setSearchValue] = useState<string>('')\n\n  useEffect(() => {\n    const contentContainer = contentRef?.current\n    if (contentContainer) {\n      const isChildrenQuantityMany =\n        contentContainer.scrollHeight - LAST_ITEM_BORDER > 0\n\n      if (isChildrenQuantityMany) {\n        setIsExpandButtonHidden(false)\n      } else {\n        setIsExpandButtonHidden(true)\n      }\n    }\n  }, [children])\n\n  useEffect(() => {\n    if (!toggleable) {\n      setIsExpanded(true)\n      setIsOpened(true)\n    }\n  }, [toggleable])\n\n  useEffect(() => {\n    if (isOpenedInit) {\n      setIsOpened(true)\n    }\n    if (isExpandedInit) {\n      setIsExpanded(true)\n    }\n  }, [isOpenedInit, isExpandedInit])\n\n  const onToggle = (): void => {\n    if (toggleable) {\n      if (isOpened) {\n        setIsExpanded(false)\n      }\n      setIsOpened(!isOpened)\n    }\n  }\n\n  const handleSearchChange = (value: string): void => {\n    setSearchValue(value)\n    if (value?.length > 0) {\n      setIsExpanded(true)\n    }\n    if (onSearchChange) {\n      onSearchChange(value)\n    }\n  }\n\n  const shouldShowMoreButton =\n    toggleable && !isExpandButtonHidden && isOpened && searchValue.length === 0\n\n  const onShowMoreButtonClick = (): void =>\n    setIsExpanded((wasExpanded) => !wasExpanded)\n\n  return (\n    <div className={clsx('TagFilterGroup', className)}>\n      <button\n        className='reset-button-styles TagFilterGroup__Toggler'\n        onClick={onToggle}\n      >\n        <Typography className='TagFilterGroup__Title' text={title} />\n        <Condition match={toggleable}>\n          <ArrowDownNewIcon\n            className={clsx(\n              'TagFilterGroup__Icon',\n              isOpened && 'TagFilterGroup__Icon_RotateUp',\n            )}\n          />\n        </Condition>\n      </button>\n      <Condition match={isOpened && isSearchVisible}>\n        <div className='TagFilterGroup__Search'>\n          <Field\n            fieldSize='XL'\n            iconLeft={SearchIconNew}\n            id={`${id}__search`}\n            label={searchLabel}\n            onChange={(e): void => handleSearchChange(e.toString())}\n            value={searchValue}\n          />\n        </div>\n      </Condition>\n      <div\n        ref={contentRef}\n        className={clsx(\n          'TagFilterGroup__Content',\n          isOpened && 'TagFilterGroup__Content_Opened',\n          isExpanded && 'TagFilterGroup__Content_Expanded',\n          shouldShowMoreButton && 'TagFilterGroup__Content_Gradient',\n        )}\n      >\n        {children}\n      </div>\n      <Condition match={shouldShowMoreButton}>\n        <Button\n          className='reset-button-styles TagFilterGroup__ExpandButton'\n          onClick={onShowMoreButtonClick}\n          text={isExpanded ? hideLabel : showAllLabel}\n          theme='Tertiary'\n        />\n      </Condition>\n    </div>\n  )\n}\n\nexport default TagFilterGroup\n"],"names":["title","id","className","children","isOpenedInit","isExpandedInit","toggleable","hideLabel","showAllLabel","searchLabel","onSearchChange","isSearchVisible","contentRef","useRef","isOpened","setIsOpened","useState","isExpanded","setIsExpanded","isExpandButtonHidden","setIsExpandButtonHidden","searchValue","setSearchValue","useEffect","contentContainer","current","isChildrenQuantityMany","scrollHeight","LAST_ITEM_BORDER","shouldShowMoreButton","length","React","clsx","onClick","Typography","text","Condition","match","ArrowDownNewIcon","Field","fieldSize","iconLeft","SearchIconNew","label","onChange","e","handleSearchChange","value","toString","ref","Button","wasExpanded","theme"],"mappings":"ivdAYgD,EAC9CA,MAAAA,EACAC,GAAAA,EACAC,UAAAA,EACAC,SAAAA,EACAC,aAAAA,GAAe,EACfC,eAAAA,GAAiB,EACjBC,WAAAA,GAAa,EACbC,UAAAA,EAAY,WACZC,aAAAA,EAAe,eACfC,YAAAA,EAAc,QACdC,eAAAA,EACAC,gBAAAA,GAAkB,MAElB,MAAMC,EAAaC,SAAY,OACxBC,EAAUC,GAAeC,YAC7BV,GAAcF,GAAgBC,IAE1BY,EAAYC,GAAiBF,YAAUV,GAAcD,IACrDc,EAAsBC,GAA2BJ,YAAS,IAC1DK,EAAaC,GAAkBN,WAAiB,IAEvDO,YAAU,KACR,MAAMC,EAAmBZ,MAAAA,SAAAA,EAAYa,QACrC,GAAID,EAAkB,CACpB,MAAME,EACJF,EAAiBG,aAAeC,mBAAmB,EAGnDR,GADEM,KAML,CAACvB,IAEJoB,YAAU,KACHjB,IACHY,GAAc,GACdH,GAAY,KAEb,CAACT,IAEJiB,YAAU,KACJnB,GACFW,GAAY,GAEVV,GACFa,GAAc,IAEf,CAACd,EAAcC,IAElB,MAmBMwB,EACJvB,IAAea,GAAwBL,GAAmC,IAAvBO,EAAYS,OAKjE,OACEC,+BAAK7B,UAAW8B,UAAK,iBAAkB9B,IACrC6B,kCACE7B,UAAU,8CACV+B,QA7BW,KACX3B,IACEQ,GACFI,GAAc,GAEhBH,GAAaD,MA0BXiB,wBAACG,GAAWhC,UAAU,wBAAwBiC,KAAMnC,IACpD+B,wBAACK,GAAUC,MAAO/B,GAChByB,wBAACO,GACCpC,UAAW8B,UACT,uBACAlB,GAAY,qCAKpBiB,wBAACK,GAAUC,MAAOvB,GAAYH,GAC5BoB,+BAAK7B,UAAU,0BACb6B,wBAACQ,GACCC,UAAU,KACVC,SAAUC,EACVzC,GAAOA,EAAH,WACJ0C,MAAOlC,EACPmC,SAAWC,IAAYC,OAvCLC,EAuCwBF,EAAEG,WAtCpD1B,EAAeyB,IACXA,MAAAA,SAAAA,EAAOjB,QAAS,GAClBZ,GAAc,QAEZR,GACFA,EAAeqC,IANQ,IAACA,GAwClBA,MAAO1B,MAIbU,+BACEkB,IAAKrC,EACLV,UAAW8B,UACT,0BACAlB,GAAY,iCACZG,GAAc,mCACdY,GAAwB,qCAGzB1B,GAEH4B,wBAACK,GAAUC,MAAOR,GAChBE,wBAACmB,GACChD,UAAU,mDACV+B,QA7CsB,IAC5Bf,EAAeiC,IAAiBA,GA6C1BhB,KAAMlB,EAAaV,EAAYC,EAC/B4C,MAAM"}