"use strict";var e=require("tslib"),t=require("react"),o=require("clsx"),l=require("react-modal"),n=require("../Condition/Condition.js"),a=require("../../icons/ArrowDown/ArrowDown.js"),s=require("../../icons/Close/Close.js"),r=require("../Typography/Typography.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=i(t),d=i(o),u=i(l);const m={contentLabel:"Модальное окно",closeBtnText:"Назад",closeTimeoutMS:400,contentVerticalAlign:"middle",isShowCloseBtn:!1,isMobilePage:!1},f=o=>{var{className:l,children:i,closeBtnText:f,contentVerticalAlign:y,isMobilePage:h,isShowCloseBtn:p,isTextClose:C,onClose:v,overlayClassName:x,isOpen:N,isBodyScrollAllowed:E=!0,onAfterClose:B,onAfterOpen:_,iconLeft:b,title:w,transitionDuration:g=200,withGesture:A=!1}=o,T=e.__rest(o,["className","children","closeBtnText","contentVerticalAlign","isMobilePage","isShowCloseBtn","isTextClose","onClose","overlayClassName","isOpen","isBodyScrollAllowed","onAfterClose","onAfterOpen","iconLeft","title","transitionDuration","withGesture"]);const[M,S]=t.useState({start:0,end:0}),[q,O]=t.useState(null),L=e=>{S(t=>({start:e.changedTouches[0].screenY,end:t.end}))},P=e=>{S(t=>({start:t.start,end:e.changedTouches[0].screenY}))},j=t.useCallback(()=>{M.end-100>M.start&&v({})},[M.end,M.start]);return t.useEffect(()=>{if(!E||!N)return;const e=window.scrollY;return N&&(document.body.style.top=`-${e}px`,document.body.style.position="fixed",document.body.style.overflow="hidden"),()=>{document.body.style.removeProperty("position"),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("top"),window.scrollTo(0,e)}},[N]),t.useEffect(()=>{A&&j()},[M.end,A]),t.useEffect(()=>(q&&A&&(q.addEventListener("touchstart",L,!1),q.addEventListener("touchend",P,!1)),()=>{null==q||q.removeEventListener("touchstart",L),null==q||q.removeEventListener("touchend",P)}),[q,A]),c.default.createElement(u.default,Object.assign({ariaHideApp:!1,className:d.default("ModalNext",l),isOpen:N,onAfterClose:B,onAfterOpen:_,onRequestClose:v,overlayClassName:d.default("OverlayNext",h&&"--mobile-page",`ReactModal__Overlay-ContentVerticalAlign-${String(y)[0].toUpperCase()}${null==y?void 0:y.slice(1)}`,x),style:{content:{transition:g+"ms"}}},T),c.default.createElement(n,{match:Boolean(p)},c.default.createElement("button",{className:d.default("ModalNext__CloseBtn",C?"ModalNext__CloseBtn-Text":"ModalNext__CloseBtn-Cross","reset-button-styles"),onClick:v},c.default.createElement(n,{match:Boolean(C)},c.default.createElement(a,null),c.default.createElement(r,{className:"ModalNext__CloseBtnText",text:(null==f?void 0:f.trim())||m.closeBtnText,type:"Body2B"})),c.default.createElement(n,{match:!C},c.default.createElement(s,{height:24,width:24})))),c.default.createElement(n,{match:A},c.default.createElement("div",{ref:e=>O(e),className:"ModalNext__gesture-hide"})),c.default.createElement(n,{match:Boolean(null==w?void 0:w.trim())},b&&c.default.createElement("div",{className:"ModalNext__Icon"},b),c.default.createElement(r,{className:d.default("ModalNext__Title",Boolean(b)&&"ModalNext_WithLeftIcon"),text:w,type:"smallSubtitle"})),i)};f.defaultProps=m,module.exports=f;
//# sourceMappingURL=Modal.js.map
