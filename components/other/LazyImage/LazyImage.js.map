{"version":3,"file":"LazyImage.js","sources":["../../../../src/components/other/LazyImage/LazyImage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, FC } from 'react'\nimport clsx from 'clsx'\nimport './LazyImage.scss'\nimport { LazyImageProps, ImagePaths } from './types'\n\nconst LazyImage: FC<LazyImageProps> = ({\n  className,\n  src,\n  alt,\n  height = 272,\n  lqip,\n  width = 272,\n  source,\n  itemProp,\n  title = '',\n  loading = 'lazy',\n}) => {\n  const aspectRatio = width / height\n  const [loaded, setLoaded] = useState(false)\n  const imgRef = useRef<HTMLImageElement>(null)\n  const isNotModern = typeof src === 'string'\n  const isLoadingEager = loading === 'eager'\n  const imagePaths = isNotModern\n    ? {\n        jpg: src as string,\n        webp: '',\n      }\n    : (src as ImagePaths)\n  const isSourcePassed = Boolean(source)\n  useEffect(() => {\n    if (imgRef.current && imgRef.current.complete) {\n      setLoaded(true)\n    }\n  }, [])\n  return (\n    <div\n      className={clsx(\n        'LazyImage',\n        className,\n        (loaded || isLoadingEager) && '--loaded',\n      )}\n    >\n      <div style={{ paddingBottom: `${100 / aspectRatio}%` }} />\n      <img\n        alt=''\n        aria-hidden='true'\n        className='LazyImage__Placeholder'\n        src={lqip}\n      />\n\n      <picture>\n        {!isSourcePassed &&\n          (!isNotModern ? (\n            <source srcSet={imagePaths.webp} type='image/webp' />\n          ) : (\n            <source srcSet={imagePaths.jpg} type='image/jpeg' />\n          ))}\n\n        {source?.map(({ srcSet, type, media }, index) => (\n          <source\n            key={`${srcSet}__${index}`}\n            media={media}\n            srcSet={srcSet}\n            type={type}\n          />\n        ))}\n        <img\n          ref={imgRef}\n          alt={alt}\n          className='LazyImage__Source'\n          height={height}\n          itemProp={itemProp}\n          loading={loading}\n          // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n          onLoad={() => setLoaded(true)}\n          src={imagePaths.jpg}\n          title={title || alt}\n          width={width}\n        />\n      </picture>\n    </div>\n  )\n}\nexport default LazyImage\n"],"names":["className","src","alt","height","lqip","width","source","itemProp","title","loading","aspectRatio","loaded","setLoaded","useState","imgRef","useRef","isNotModern","isLoadingEager","imagePaths","jpg","webp","isSourcePassed","Boolean","useEffect","current","complete","React","clsx","style","paddingBottom","srcSet","type","map","media","index","key","ref","onLoad"],"mappings":"+JAKsC,EACpCA,UAAAA,EACAC,IAAAA,EACAC,IAAAA,EACAC,OAAAA,EAAS,IACTC,KAAAA,EACAC,MAAAA,EAAQ,IACRC,OAAAA,EACAC,SAAAA,EACAC,MAAAA,EAAQ,GACRC,QAAAA,EAAU,WAEV,MAAMC,EAAcL,EAAQF,GACrBQ,EAAQC,GAAaC,YAAS,GAC/BC,EAASC,SAAyB,MAClCC,EAA6B,iBAARf,EACrBgB,EAA6B,UAAZR,EACjBS,EAAaF,EACf,CACEG,IAAKlB,EACLmB,KAAM,IAEPnB,EACCoB,EAAiBC,QAAQhB,GAM/B,OALAiB,YAAU,KACJT,EAAOU,SAAWV,EAAOU,QAAQC,UACnCb,GAAU,IAEX,IAEDc,+BACE1B,UAAW2B,UACT,YACA3B,GACCW,GAAUM,IAAmB,aAGhCS,+BAAKE,MAAO,CAAEC,cAAkB,IAAMnB,EAAT,OAC7BgB,+BACExB,IAAI,iBACQ,OACZF,UAAU,yBACVC,IAAKG,IAGPsB,wCACIL,IACEL,EAGAU,kCAAQI,OAAQZ,EAAWC,IAAKY,KAAK,eAFrCL,kCAAQI,OAAQZ,EAAWE,KAAMW,KAAK,gBAKzCzB,MAAAA,SAAAA,EAAQ0B,IAAI,EAAGF,OAAAA,EAAQC,KAAAA,EAAME,MAAAA,GAASC,IACrCR,kCACES,IAAK,GAAGL,MAAWI,IACnBD,MAAOA,EACPH,OAAQA,EACRC,KAAMA,KAGVL,+BACEU,IAAKtB,EACLZ,IAAKA,EACLF,UAAU,oBACVG,OAAQA,EACRI,SAAUA,EACVE,QAASA,EAET4B,OAAQ,IAAMzB,GAAU,GACxBX,IAAKiB,EAAWC,IAChBX,MAAOA,GAASN,EAChBG,MAAOA"}