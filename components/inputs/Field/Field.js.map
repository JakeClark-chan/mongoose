{"version":3,"file":"Field.js","sources":["../../../../src/components/inputs/Field/Field.tsx"],"sourcesContent":["import React, {\n  ChangeEvent,\n  FC,\n  forwardRef,\n  useState,\n  createElement,\n  LegacyRef,\n} from 'react'\nimport clsx from 'clsx'\nimport InputMask from 'react-input-mask'\nimport { Typography } from '../../other/Typography'\nimport { useEffectAfterMount } from '../../../hooks'\nimport { FieldProps } from './types'\nimport './Field.scss'\nimport { Tooltip } from '../../other/Tooltip'\nimport { Button } from '../../buttons/Button'\n\nconst Field: FC<FieldProps> = forwardRef(\n  (\n    {\n      isAdviceButton = false,\n      adviceMsg = '',\n      autoComplete,\n      className,\n      disabled = false,\n      errorMsg = '',\n      fullChangeControl = false,\n      iconLeft,\n      iconRight,\n      id,\n      keepLabel = true,\n      label,\n      labelClassName,\n      mask,\n      maskChar = ' ',\n      name,\n      onBlur,\n      onChange,\n      onFocus,\n      onKeyDown,\n      onKeyPress,\n      onKeyUp,\n      isRequired = false,\n      isError = false,\n      successMsg = '',\n      fieldSize = 'L',\n      type = 'text',\n      value = '',\n      version = 'v1',\n      warningMsg = '',\n      wrapperClassName,\n      ...props\n    },\n    ref,\n  ) => {\n    const [localValue, setLocalValue] = useState(value)\n\n    useEffectAfterMount(() => {\n      if (!fullChangeControl) {\n        onChange(localValue)\n      }\n    }, [localValue])\n\n    const onLocalChange = (e: ChangeEvent<HTMLInputElement>): void =>\n      setLocalValue(e.target.value)\n\n    const messageByPriority = errorMsg || warningMsg || successMsg || adviceMsg\n    const shouldShowInfoButton =\n      adviceMsg &&\n      isAdviceButton &&\n      disabled &&\n      !errorMsg &&\n      !warningMsg &&\n      !successMsg\n    const commonInputProps = {\n      autoComplete,\n      className: clsx(\n        'FieldNext',\n        keepLabel && 'FieldNext_KeepLabel',\n        `FieldNext_Size-${fieldSize}`,\n        Boolean(iconLeft) && 'FieldNext_WithLeftIcon',\n        Boolean(iconRight) && 'FieldNext_WithRightIcon',\n        className,\n      ),\n      disabled,\n      id,\n      name,\n      onBlur,\n      onChange: fullChangeControl ? onChange : onLocalChange,\n      onFocus,\n      onKeyDown,\n      onKeyPress,\n      onKeyUp,\n      type,\n      value: fullChangeControl ? value : localValue,\n      ref: ref as LegacyRef<HTMLInputElement>,\n      ...props,\n    }\n\n    const isBadgeNeeded = fullChangeControl\n      ? isRequired && !value\n      : isRequired && !localValue\n\n    const isErrorStyle = errorMsg || isError\n\n    return (\n      <div\n        className={clsx(\n          'FieldNext__Wrapper',\n          `FieldNext__Wrapper_${version}`,\n          `FieldNext__Wrapper_${fieldSize}`,\n          successMsg && 'FieldNext__Wrapper_With-Success',\n          warningMsg && 'FieldNext__Wrapper_With-Warning',\n          isErrorStyle && 'FieldNext__Wrapper_With-Error',\n          wrapperClassName,\n        )}\n      >\n        {iconLeft && (\n          <div\n            className={clsx(\n              'FieldNext__Icon',\n              'FieldNext__Icon_Left',\n              `--${fieldSize}`,\n            )}\n          >\n            {createElement(iconLeft, {\n              color: disabled ? '#E6E6E6' : undefined,\n            })}\n          </div>\n        )}\n        {iconRight && (\n          <div\n            className={clsx(\n              'FieldNext__Icon',\n              'FieldNext__Icon_Right',\n              `--${fieldSize}`,\n            )}\n          >\n            {createElement(iconRight, {\n              color: disabled ? '#E6E6E6' : undefined,\n            })}\n          </div>\n        )}\n        {mask ? (\n          <InputMask mask={mask} maskChar={maskChar} {...commonInputProps} />\n        ) : (\n          <input {...commonInputProps} />\n        )}\n        {/* На последовательность input -> label завязано очень много css стилей */}\n        {/* Сюда ничего не вставлять */}\n        <label\n          className={clsx('FieldNext__Label', labelClassName)}\n          htmlFor={id}\n        >\n          {label}\n          {isBadgeNeeded && <b className='FieldNext__Label_required'> *</b>}\n        </label>\n        {shouldShowInfoButton ? (\n          <div className='FieldNext__Tooltip'>\n            <Tooltip\n              arrowColor='#4d5052'\n              backgroundColor='#4d5052'\n              eventType='hover'\n              html\n              id={messageByPriority}\n              multiline\n              overlay={messageByPriority}\n              place='bottom'\n              textColor='#ffffff'\n            >\n              <Button className='FieldNext__InfoButton' />\n            </Tooltip>\n          </div>\n        ) : (\n          <Typography\n            className={clsx(\n              'FieldNext__Message',\n              messageByPriority && 'FieldNext__Message_Visible',\n            )}\n            text={messageByPriority}\n          />\n        )}\n      </div>\n    )\n  },\n)\n\nexport default Field\n"],"names":["Field","forwardRef","_a","ref","isAdviceButton","adviceMsg","autoComplete","className","disabled","errorMsg","fullChangeControl","iconLeft","iconRight","id","keepLabel","label","labelClassName","mask","maskChar","name","onBlur","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","isRequired","isError","successMsg","fieldSize","type","value","version","warningMsg","wrapperClassName","props","localValue","setLocalValue","useState","useEffectAfterMount","messageByPriority","shouldShowInfoButton","commonInputProps","clsx","Boolean","e","target","isBadgeNeeded","isErrorStyle","React","createElement","color","undefined","InputMask","htmlFor","Tooltip","arrowColor","backgroundColor","eventType","html","multiline","overlay","place","textColor","Button","Typography","text"],"mappings":"2YAiBMA,EAAwBC,aAC5B,CACEC,EAkCAC,SAlCAC,eACEA,GAAiB,EAAKC,UACtBA,EAAY,GAAEC,aACdA,EAAYC,UACZA,EAASC,SACTA,GAAW,EAAKC,SAChBA,EAAW,GAAEC,kBACbA,GAAoB,EAAKC,SACzBA,EAAQC,UACRA,EAASC,GACTA,EAAEC,UACFA,GAAY,EAAIC,MAChBA,EAAKC,eACLA,EAAcC,KACdA,EAAIC,SACJA,EAAW,IAAGC,KACdA,EAAIC,OACJA,EAAMC,SACNA,EAAQC,QACRA,EAAOC,UACPA,EAASC,WACTA,EAAUC,QACVA,EAAOC,WACPA,GAAa,EAAKC,QAClBA,GAAU,EAAKC,WACfA,EAAa,GAAEC,UACfA,EAAY,IAAGC,KACfA,EAAO,OAAMC,MACbA,EAAQ,GAAEC,QACVA,EAAU,KAAIC,WACdA,EAAa,GAAEC,iBACfA,KACGC,aAhCL,yWAoCA,MAAOC,EAAYC,GAAiBC,WAASP,GAE7CQ,sBAAoB,KACb7B,GACHW,EAASe,IAEV,CAACA,IAEJ,MAGMI,EAAoB/B,GAAYwB,GAAcL,GAAcvB,EAC5DoC,EACJpC,GACAD,GACAI,IACCC,IACAwB,IACAL,EACGc,iBACJpC,aAAAA,EACAC,UAAWoC,UACT,YACA7B,GAAa,sBACb,kBAAkBe,EAClBe,QAAQjC,IAAa,yBACrBiC,QAAQhC,IAAc,0BACtBL,GAEFC,SAAAA,EACAK,GAAAA,EACAM,KAAAA,EACAC,OAAAA,EACAC,SAAUX,EAAoBW,EAzBTwB,GACrBR,EAAcQ,EAAEC,OAAOf,OAyBvBT,QAAAA,EACAC,UAAAA,EACAC,WAAAA,EACAC,QAAAA,EACAK,KAAAA,EACAC,MAAOrB,EAAoBqB,EAAQK,EACnCjC,IAAKA,GACFgC,GAGCY,EAAgBrC,EAClBgB,IAAeK,EACfL,IAAeU,EAEbY,EAAevC,GAAYkB,EAEjC,OACEsB,+BACE1C,UAAWoC,UACT,qBACA,sBAAsBX,EACtB,sBAAsBH,EACtBD,GAAc,kCACdK,GAAc,kCACde,GAAgB,gCAChBd,IAGDvB,GACCsC,+BACE1C,UAAWoC,UACT,kBACA,uBACA,KAAKd,IAGNqB,gBAAcvC,EAAU,CACvBwC,MAAO3C,EAAW,eAAY4C,KAInCxC,GACCqC,+BACE1C,UAAWoC,UACT,kBACA,wBACA,KAAKd,IAGNqB,gBAActC,EAAW,CACxBuC,MAAO3C,EAAW,eAAY4C,KAInCnC,EACCgC,wBAACI,yBAAUpC,KAAMA,EAAMC,SAAUA,GAAcwB,IAE/CO,iDAAWP,IAIbO,iCACE1C,UAAWoC,UAAK,mBAAoB3B,GACpCsC,QAASzC,GAERE,EACAgC,GAAiBE,6BAAG1C,UAAU,oCAEhCkC,EACCQ,+BAAK1C,UAAU,sBACb0C,wBAACM,GACCC,WAAW,UACXC,gBAAgB,UAChBC,UAAU,QACVC,QACA9C,GAAI2B,EACJoB,aACAC,QAASrB,EACTsB,MAAM,SACNC,UAAU,WAEVd,wBAACe,GAAOzD,UAAU,4BAItB0C,wBAACgB,GACC1D,UAAWoC,UACT,qBACAH,GAAqB,8BAEvB0B,KAAM1B"}