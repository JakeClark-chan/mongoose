{"version":3,"file":"CalendarRange.js","sources":["../../../../src/components/inputs/Calendar/CalendarRange.tsx"],"sourcesContent":["import React, { FC, useState } from 'react'\nimport clsx from 'clsx'\nimport DatePicker from 'react-datepicker'\nimport { format } from 'date-fns'\nimport ru from 'date-fns/locale/ru'\nimport { CalendarIcon } from '../../icons/Calendar'\nimport { CalendarRangeProps } from './types'\nimport { Button } from '../../buttons'\nimport { ArrowDownNewIcon } from '../../icons/ArrowDownNew'\nimport { CloseIcon } from '../../icons/Close'\nimport CalendarHeaderRange from './parts/CalendarHeaderRange'\nimport { Condition } from '../../other/Condition'\nimport './Calendar.scss'\n\nconst Calendar: FC<CalendarRangeProps> = ({\n  cancelButtonText,\n  className,\n  customInputRef,\n  initialEndDate,\n  initialStartDate,\n  id,\n  isMobilePage,\n  locale = ru,\n  maxDate,\n  minDate,\n  onCalendarClose,\n  onCalendarOpen,\n  onChange,\n  placeholder,\n  popperPlacement,\n  selectButtonText,\n  tabIndex,\n  label,\n}) => {\n  const [startDate, setStartDate] = useState(initialStartDate)\n  const [endDate, setEndDate] = useState(initialEndDate)\n  const [isCalendarOpen, setIsCalendarOpen] = useState(false)\n\n  const change = (dates): void => {\n    const [start, end] = dates\n    onChange(dates)\n    setStartDate(start)\n    setEndDate(end)\n  }\n\n  const startDateValue = startDate\n    ? format(new Date(startDate as Date), isMobilePage ? 'dd.MM' : 'dd.MM.yyyy')\n    : ''\n  const endDateValue = endDate\n    ? format(new Date(endDate as Date), isMobilePage ? 'dd.MM' : 'dd.MM.yyyy')\n    : ''\n  const inputValue = startDateValue + (endDateValue ? ` - ${endDateValue}` : '')\n\n  const toggleCalendar = (): void => {\n    setIsCalendarOpen(!isCalendarOpen)\n  }\n\n  const resetDateHandler = (): void => {\n    change([null, null])\n  }\n\n  return (\n    <div\n      className={clsx('CalendarNext', className, {\n        '--opened': isCalendarOpen,\n      })}\n    >\n      <DatePicker\n        className={clsx('CalendarNext__DatePicker', {\n          '--opened': isCalendarOpen,\n          '--filled': inputValue,\n        })}\n        customInputRef={customInputRef}\n        dateFormat='dd.MM.yyyy'\n        disabledKeyboardNavigation\n        endDate={endDate}\n        id={id}\n        locale={locale}\n        maxDate={maxDate}\n        minDate={minDate}\n        onCalendarClose={onCalendarClose}\n        onCalendarOpen={onCalendarOpen}\n        onChange={change}\n        onClickOutside={toggleCalendar}\n        onFocus={toggleCalendar}\n        open={isCalendarOpen}\n        popperPlacement={popperPlacement}\n        renderCustomHeader={(props): JSX.Element => (\n          <CalendarHeaderRange\n            endDate={endDateValue}\n            startDate={startDateValue}\n            {...props}\n          />\n        )}\n        selected={startDate}\n        selectsRange\n        showPopperArrow={false}\n        startDate={startDate}\n        tabIndex={tabIndex}\n        value={inputValue}\n      >\n        <div className='react-datepicker__button-container'>\n          <Button\n            className='ButtonNext__cancel'\n            onClick={resetDateHandler}\n            text={cancelButtonText}\n            theme='Tertiary'\n          />\n          <Button\n            className='ButtonNext__choose'\n            onClick={toggleCalendar}\n            text={selectButtonText}\n            theme='Secondary'\n          />\n        </div>\n      </DatePicker>\n      {/* eslint-disable-next-line jsx-a11y/label-has-associated-control */}\n      <label\n        className={clsx('CalendarNext__Label --range', {\n          '--opened': isCalendarOpen,\n          '--filled': inputValue,\n        })}\n        htmlFor={id}\n      >\n        {placeholder}\n      </label>\n      {/* eslint-disable-next-line jsx-a11y/label-has-associated-control */}\n      <label className='CalendarNext__Icon' htmlFor={id}>\n        <Condition match={!isMobilePage || !isCalendarOpen}>\n          <CalendarIcon />\n        </Condition>\n      </label>\n      <label\n        className={clsx(\n          {\n            CalendarNext__Cross: isMobilePage && isCalendarOpen,\n            'CalendarNext__Expand-arrow': !isMobilePage || !isCalendarOpen,\n          },\n          { '--opened': isCalendarOpen },\n        )}\n        htmlFor={id}\n      >\n        {isMobilePage && isCalendarOpen ? (\n          <CloseIcon color='#8E979F' height={24} width={24} />\n        ) : (\n          <ArrowDownNewIcon stroke='#606971' width={16} />\n        )}\n      </label>\n    </div>\n  )\n}\n\nCalendar.defaultProps = {\n  selectButtonText: 'Выбрать',\n  cancelButtonText: 'Отменить',\n}\n\nexport default Calendar\n"],"names":["Calendar","cancelButtonText","className","customInputRef","initialEndDate","initialStartDate","id","isMobilePage","locale","ru","maxDate","minDate","onCalendarClose","onCalendarOpen","onChange","placeholder","popperPlacement","selectButtonText","tabIndex","label","startDate","setStartDate","useState","endDate","setEndDate","isCalendarOpen","setIsCalendarOpen","change","dates","start","end","startDateValue","format","Date","endDateValue","inputValue","toggleCalendar","React","clsx","--opened","DatePicker","--filled","dateFormat","disabledKeyboardNavigation","onClickOutside","onFocus","open","renderCustomHeader","props","CalendarHeaderRange","selected","selectsRange","showPopperArrow","value","Button","onClick","text","theme","htmlFor","Condition","match","CalendarIcon","CalendarNext__Cross","CalendarNext__Expand-arrow","CloseIcon","color","height","width","ArrowDownNewIcon","stroke","defaultProps"],"mappings":"kydAcMA,EAAmC,EACvCC,iBAAAA,EACAC,UAAAA,EACAC,eAAAA,EACAC,eAAAA,EACAC,iBAAAA,EACAC,GAAAA,EACAC,aAAAA,EACAC,OAAAA,EAASC,UACTC,QAAAA,EACAC,QAAAA,EACAC,gBAAAA,EACAC,eAAAA,EACAC,SAAAA,EACAC,YAAAA,EACAC,gBAAAA,EACAC,iBAAAA,EACAC,SAAAA,EACAC,MAAAA,MAEA,MAAOC,EAAWC,GAAgBC,WAASjB,IACpCkB,EAASC,GAAcF,WAASlB,IAChCqB,EAAgBC,GAAqBJ,YAAS,GAE/CK,EAAUC,IACd,MAAOC,EAAOC,GAAOF,EACrBd,EAASc,GACTP,EAAaQ,GACbL,EAAWM,IAGPC,EAAiBX,EACnBY,SAAO,IAAIC,KAAKb,GAAoBb,EAAe,QAAU,cAC7D,GACE2B,EAAeX,EACjBS,SAAO,IAAIC,KAAKV,GAAkBhB,EAAe,QAAU,cAC3D,GACE4B,EAAaJ,GAAkBG,EAAe,MAAMA,EAAiB,IAErEE,EAAiB,KACrBV,GAAmBD,IAOrB,OACEY,+BACEnC,UAAWoC,UAAK,eAAgBpC,EAAW,CACzCqC,WAAYd,KAGdY,wBAACG,WACCtC,UAAWoC,UAAK,2BAA4B,CAC1CC,WAAYd,EACZgB,WAAYN,IAEdhC,eAAgBA,EAChBuC,WAAW,aACXC,8BACApB,QAASA,EACTjB,GAAIA,EACJE,OAAQA,EACRE,QAASA,EACTC,QAASA,EACTC,gBAAiBA,EACjBC,eAAgBA,EAChBC,SAAUa,EACViB,eAAgBR,EAChBS,QAAST,EACTU,KAAMrB,EACNT,gBAAiBA,EACjB+B,mBAAqBC,GACnBX,wBAACY,iBACC1B,QAASW,EACTd,UAAWW,GACPiB,IAGRE,SAAU9B,EACV+B,gBACAC,iBAAiB,EACjBhC,UAAWA,EACXF,SAAUA,EACVmC,MAAOlB,GAEPE,+BAAKnC,UAAU,sCACbmC,wBAACiB,GACCpD,UAAU,qBACVqD,QA/Ce,KACvB5B,EAAO,CAAC,KAAM,QA+CN6B,KAAMvD,EACNwD,MAAM,aAERpB,wBAACiB,GACCpD,UAAU,qBACVqD,QAASnB,EACToB,KAAMvC,EACNwC,MAAM,gBAKZpB,iCACEnC,UAAWoC,UAAK,8BAA+B,CAC7CC,WAAYd,EACZgB,WAAYN,IAEduB,QAASpD,GAERS,GAGHsB,iCAAOnC,UAAU,qBAAqBwD,QAASpD,GAC7C+B,wBAACsB,GAAUC,OAAQrD,IAAiBkB,GAClCY,wBAACwB,UAGLxB,iCACEnC,UAAWoC,UACT,CACEwB,oBAAqBvD,GAAgBkB,EACrCsC,8BAA+BxD,IAAiBkB,GAElD,CAAEc,WAAYd,IAEhBiC,QAASpD,GAERC,GAAgBkB,EACfY,wBAAC2B,GAAUC,MAAM,UAAUC,OAAQ,GAAIC,MAAO,KAE9C9B,wBAAC+B,GAAiBC,OAAO,UAAUF,MAAO,QAOpDnE,EAASsE,aAAe,CACtBrD,iBAAkB,UAClBhB,iBAAkB"}