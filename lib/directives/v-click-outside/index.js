const clickHandler = (e, el) => {
    if (el.contains(e.target) &&
        el._binds?.value &&
        !el._binds?.value.closeConditional) {
        return;
    }
    if (typeof el._binds?.value === 'function') {
        el._binds.value(e);
    }
    if (typeof el._binds?.value === 'object') {
        el._binds.value.handler(e);
    }
};
const removeListener = (el) => {
    document.body.removeEventListener('click', el._onClick, true);
    delete el._onClick;
    delete el._binds;
};
export const clickOutside = {
    beforeMount(el, binding) {
        el._binds = binding;
    },
    mounted(el) {
        el._onClick = (e) => clickHandler(e, el);
        document.body.addEventListener('click', el._onClick, true);
    },
    beforeUpdate(el, binding) {
        el._binds = binding;
    },
    beforeUnmount(el) {
        removeListener(el);
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy92dWVsYW5kL3NyYy9kaXJlY3RpdmVzL3YtY2xpY2stb3V0c2lkZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM3QixJQUNFLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNyQixFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUs7UUFDaEIsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxnQkFBZ0IsRUFDbEM7UUFDQSxPQUFNO0tBQ1A7SUFFRCxJQUFJLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLEtBQUssVUFBVSxFQUFFO1FBQzFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQ25CO0lBRUQsSUFBSSxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxLQUFLLFFBQVEsRUFBRTtRQUN4QyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDM0I7QUFDSCxDQUFDLENBQUE7QUFFRCxNQUFNLGNBQWMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFO0lBQzVCLFFBQVEsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDN0QsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFBO0lBQ2xCLE9BQU8sRUFBRSxDQUFDLE1BQU0sQ0FBQTtBQUNsQixDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUc7SUFDMUIsV0FBVyxDQUFDLEVBQUUsRUFBRSxPQUFPO1FBQ3JCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFBO0lBQ3JCLENBQUM7SUFFRCxPQUFPLENBQUMsRUFBRTtRQUNSLEVBQUUsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7UUFDeEMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUM1RCxDQUFDO0lBRUQsWUFBWSxDQUFDLEVBQUUsRUFBRSxPQUFPO1FBQ3RCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFBO0lBQ3JCLENBQUM7SUFFRCxhQUFhLENBQUMsRUFBRTtRQUNkLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUNwQixDQUFDO0NBQ0YsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNsaWNrSGFuZGxlciA9IChlLCBlbCkgPT4ge1xuICBpZiAoXG4gICAgZWwuY29udGFpbnMoZS50YXJnZXQpICYmXG4gICAgZWwuX2JpbmRzPy52YWx1ZSAmJlxuICAgICFlbC5fYmluZHM/LnZhbHVlLmNsb3NlQ29uZGl0aW9uYWxcbiAgKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAodHlwZW9mIGVsLl9iaW5kcz8udmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBlbC5fYmluZHMudmFsdWUoZSlcbiAgfVxuXG4gIGlmICh0eXBlb2YgZWwuX2JpbmRzPy52YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBlbC5fYmluZHMudmFsdWUuaGFuZGxlcihlKVxuICB9XG59XG5cbmNvbnN0IHJlbW92ZUxpc3RlbmVyID0gKGVsKSA9PiB7XG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlbC5fb25DbGljaywgdHJ1ZSlcbiAgZGVsZXRlIGVsLl9vbkNsaWNrXG4gIGRlbGV0ZSBlbC5fYmluZHNcbn1cblxuZXhwb3J0IGNvbnN0IGNsaWNrT3V0c2lkZSA9IHtcbiAgYmVmb3JlTW91bnQoZWwsIGJpbmRpbmcpIHtcbiAgICBlbC5fYmluZHMgPSBiaW5kaW5nXG4gIH0sXG5cbiAgbW91bnRlZChlbCkge1xuICAgIGVsLl9vbkNsaWNrID0gKGUpID0+IGNsaWNrSGFuZGxlcihlLCBlbClcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWwuX29uQ2xpY2ssIHRydWUpXG4gIH0sXG5cbiAgYmVmb3JlVXBkYXRlKGVsLCBiaW5kaW5nKSB7XG4gICAgZWwuX2JpbmRzID0gYmluZGluZ1xuICB9LFxuXG4gIGJlZm9yZVVubW91bnQoZWwpIHtcbiAgICByZW1vdmVMaXN0ZW5lcihlbClcbiAgfSxcbn1cbiJdfQ==