import { h, defineComponent, onMounted, provide, ref, reactive, unref, withDirectives, } from 'vue';
import { resize } from '../../directives';
import { breakpoints } from '../../services/breakpoints';
import { throttle } from '../../utils/throttle';
export default defineComponent({
    name: 'v-app',
    directives: {
        resize,
    },
    props: {
        global: {
            type: Object,
            default: null,
        },
    },
    setup(props, { slots }) {
        const TIMEOUT = 20;
        const state = ref({
            current: null,
            xlAndLess: false,
            lgAndLess: false,
            mdAndLess: false,
            smAndLess: false,
        });
        provide('$v_breakpoints', reactive(unref(state)));
        const setCurrentBreakpoint = (screen) => {
            if (screen >= breakpoints.xl) {
                return (unref(state).current = 'xl');
            }
            if (screen >= breakpoints.lg
                && screen < breakpoints.xl) {
                return (unref(state).current = 'lg');
            }
            if (screen >= breakpoints.md
                && screen < breakpoints.lg) {
                return (unref(state).current = 'md');
            }
            if (screen >= breakpoints.sm
                && screen < breakpoints.md) {
                return (unref(state).current = 'sm');
            }
            return (unref(state).current = 'sm');
        };
        const setIntervals = (screen) => {
            const { xl, lg, md, sm } = breakpoints;
            unref(state).xlAndLess = screen <= xl && screen > lg;
            unref(state).lgAndLess = screen <= lg && screen > md;
            unref(state).mdAndLess = screen <= md && screen > sm;
            unref(state).smAndLess = screen <= sm;
        };
        const setSizes = () => {
            const { innerWidth } = props.global || window;
            setCurrentBreakpoint(innerWidth);
            setIntervals(innerWidth);
        };
        const genAppWrapper = () => {
            return h('div', { class: 'v-app--wrapper' }, {
                default: () => slots.default && slots.default(),
            });
        };
        const throttledResizeListener = throttle(setSizes, TIMEOUT);
        onMounted(() => setSizes());
        return () => withDirectives(h('div', { class: 'v-app' }, genAppWrapper()), [[resize, throttledResizeListener]]);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkFwcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3Z1ZWxhbmQvc3JjL2NvbXBvbmVudHMvVkFwcC9WQXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxDQUFDLEVBQ0QsZUFBZSxFQUNmLFNBQVMsRUFDVCxPQUFPLEVBQ1AsR0FBRyxFQUNILFFBQVEsRUFDUixLQUFLLEVBQ0wsY0FBYyxHQUNmLE1BQU0sS0FBSyxDQUFBO0FBR1osT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGtCQUFrQixDQUFBO0FBR3pDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQTtBQUd4RCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sc0JBQXNCLENBQUE7QUFZL0MsZUFBZSxlQUFlLENBQUM7SUFDN0IsSUFBSSxFQUFFLE9BQU87SUFDYixVQUFVLEVBQUU7UUFDVixNQUFNO0tBQ1A7SUFDRCxLQUFLLEVBQUU7UUFDTCxNQUFNLEVBQUU7WUFDTixJQUFJLEVBQUUsTUFBTTtZQUNaLE9BQU8sRUFBRSxJQUFJO1NBQ2Q7S0FDRjtJQUNELEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUU7UUFDcEIsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFBO1FBRWxCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBaUI7WUFDaEMsT0FBTyxFQUFFLElBQUk7WUFDYixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsS0FBSztTQUNqQixDQUFDLENBQUE7UUFFRixPQUFPLENBQUMsZ0JBQWdCLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFFakQsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3RDLElBQUksTUFBTSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUU7Z0JBQzVCLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFBO2FBQ3JDO1lBRUQsSUFDRSxNQUFNLElBQUksV0FBVyxDQUFDLEVBQUU7bUJBQ3JCLE1BQU0sR0FBRyxXQUFXLENBQUMsRUFBRSxFQUMxQjtnQkFDQSxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsQ0FBQTthQUNyQztZQUVELElBQ0UsTUFBTSxJQUFJLFdBQVcsQ0FBQyxFQUFFO21CQUNyQixNQUFNLEdBQUcsV0FBVyxDQUFDLEVBQUUsRUFDMUI7Z0JBQ0EsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUE7YUFDckM7WUFFRCxJQUNFLE1BQU0sSUFBSSxXQUFXLENBQUMsRUFBRTttQkFDckIsTUFBTSxHQUFHLFdBQVcsQ0FBQyxFQUFFLEVBQzFCO2dCQUNBLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFBO2FBQ3JDO1lBRUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUE7UUFDdEMsQ0FBQyxDQUFBO1FBRUQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUM5QixNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsV0FBVyxDQUFBO1lBRXRDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO1lBQ3BELEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO1lBQ3BELEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO1lBQ3BELEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQTtRQUN2QyxDQUFDLENBQUE7UUFFRCxNQUFNLFFBQVEsR0FBRyxHQUFHLEVBQUU7WUFDcEIsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLEtBQUssQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFBO1lBRTdDLG9CQUFvQixDQUFDLFVBQVUsQ0FBQyxDQUFBO1lBQ2hDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUMxQixDQUFDLENBQUE7UUFFRCxNQUFNLGFBQWEsR0FBRyxHQUFHLEVBQUU7WUFDekIsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLEVBQUU7Z0JBQzNDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUU7YUFDaEQsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFBO1FBRUQsTUFBTSx1QkFBdUIsR0FBRyxRQUFRLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBRTNELFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFBO1FBRTNCLE9BQU8sR0FBRyxFQUFFLENBQ1YsY0FBYyxDQUNaLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsYUFBYSxFQUFFLENBQUMsRUFDN0MsQ0FBRSxDQUFFLE1BQU0sRUFBRSx1QkFBdUIsQ0FBRSxDQUFFLENBQ3hDLENBQUE7SUFDTCxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaCxcbiAgZGVmaW5lQ29tcG9uZW50LFxuICBvbk1vdW50ZWQsXG4gIHByb3ZpZGUsXG4gIHJlZixcbiAgcmVhY3RpdmUsXG4gIHVucmVmLFxuICB3aXRoRGlyZWN0aXZlcyxcbn0gZnJvbSAndnVlJ1xuXG4vLyBEaXJlY3RpdmVzXG5pbXBvcnQgeyByZXNpemUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzJ1xuXG4vLyBTZXJ2aWNlc1xuaW1wb3J0IHsgYnJlYWtwb2ludHMgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9icmVha3BvaW50cydcblxuLy8gVXRpbHNcbmltcG9ydCB7IHRocm90dGxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvdGhyb3R0bGUnXG5cbi8vIFR5cGVzXG5cbmludGVyZmFjZSBBcHBCcmVha3BvaW50cyB7XG4gIGN1cnJlbnQ6IE1heWJlPCd4bCcgfCAnbGcnIHwgJ21kJyB8ICdzbSc+XG4gIHhsQW5kTGVzczogYm9vbGVhblxuICBsZ0FuZExlc3M6IGJvb2xlYW5cbiAgbWRBbmRMZXNzOiBib29sZWFuXG4gIHNtQW5kTGVzczogYm9vbGVhblxufVxuXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICBuYW1lOiAndi1hcHAnLFxuICBkaXJlY3RpdmVzOiB7XG4gICAgcmVzaXplLFxuICB9LFxuICBwcm9wczoge1xuICAgIGdsb2JhbDoge1xuICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuICB9LFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgVElNRU9VVCA9IDIwXG5cbiAgICBjb25zdCBzdGF0ZSA9IHJlZjxBcHBCcmVha3BvaW50cz4oe1xuICAgICAgY3VycmVudDogbnVsbCxcbiAgICAgIHhsQW5kTGVzczogZmFsc2UsXG4gICAgICBsZ0FuZExlc3M6IGZhbHNlLFxuICAgICAgbWRBbmRMZXNzOiBmYWxzZSxcbiAgICAgIHNtQW5kTGVzczogZmFsc2UsXG4gICAgfSlcblxuICAgIHByb3ZpZGUoJyR2X2JyZWFrcG9pbnRzJywgcmVhY3RpdmUodW5yZWYoc3RhdGUpKSlcblxuICAgIGNvbnN0IHNldEN1cnJlbnRCcmVha3BvaW50ID0gKHNjcmVlbikgPT4ge1xuICAgICAgaWYgKHNjcmVlbiA+PSBicmVha3BvaW50cy54bCkge1xuICAgICAgICByZXR1cm4gKHVucmVmKHN0YXRlKS5jdXJyZW50ID0gJ3hsJylcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBzY3JlZW4gPj0gYnJlYWtwb2ludHMubGdcbiAgICAgICAgJiYgc2NyZWVuIDwgYnJlYWtwb2ludHMueGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gKHVucmVmKHN0YXRlKS5jdXJyZW50ID0gJ2xnJylcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBzY3JlZW4gPj0gYnJlYWtwb2ludHMubWRcbiAgICAgICAgJiYgc2NyZWVuIDwgYnJlYWtwb2ludHMubGdcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gKHVucmVmKHN0YXRlKS5jdXJyZW50ID0gJ21kJylcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBzY3JlZW4gPj0gYnJlYWtwb2ludHMuc21cbiAgICAgICAgJiYgc2NyZWVuIDwgYnJlYWtwb2ludHMubWRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gKHVucmVmKHN0YXRlKS5jdXJyZW50ID0gJ3NtJylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICh1bnJlZihzdGF0ZSkuY3VycmVudCA9ICdzbScpXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0SW50ZXJ2YWxzID0gKHNjcmVlbikgPT4ge1xuICAgICAgY29uc3QgeyB4bCwgbGcsIG1kLCBzbSB9ID0gYnJlYWtwb2ludHNcblxuICAgICAgdW5yZWYoc3RhdGUpLnhsQW5kTGVzcyA9IHNjcmVlbiA8PSB4bCAmJiBzY3JlZW4gPiBsZ1xuICAgICAgdW5yZWYoc3RhdGUpLmxnQW5kTGVzcyA9IHNjcmVlbiA8PSBsZyAmJiBzY3JlZW4gPiBtZFxuICAgICAgdW5yZWYoc3RhdGUpLm1kQW5kTGVzcyA9IHNjcmVlbiA8PSBtZCAmJiBzY3JlZW4gPiBzbVxuICAgICAgdW5yZWYoc3RhdGUpLnNtQW5kTGVzcyA9IHNjcmVlbiA8PSBzbVxuICAgIH1cblxuICAgIGNvbnN0IHNldFNpemVzID0gKCkgPT4ge1xuICAgICAgY29uc3QgeyBpbm5lcldpZHRoIH0gPSBwcm9wcy5nbG9iYWwgfHwgd2luZG93XG5cbiAgICAgIHNldEN1cnJlbnRCcmVha3BvaW50KGlubmVyV2lkdGgpXG4gICAgICBzZXRJbnRlcnZhbHMoaW5uZXJXaWR0aClcbiAgICB9XG5cbiAgICBjb25zdCBnZW5BcHBXcmFwcGVyID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIGgoJ2RpdicsIHsgY2xhc3M6ICd2LWFwcC0td3JhcHBlcicgfSwge1xuICAgICAgICBkZWZhdWx0OiAoKSA9PiBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdGhyb3R0bGVkUmVzaXplTGlzdGVuZXIgPSB0aHJvdHRsZShzZXRTaXplcywgVElNRU9VVClcblxuICAgIG9uTW91bnRlZCgoKSA9PiBzZXRTaXplcygpKVxuXG4gICAgcmV0dXJuICgpID0+XG4gICAgICB3aXRoRGlyZWN0aXZlcyhcbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3YtYXBwJyB9LCBnZW5BcHBXcmFwcGVyKCkpLFxuICAgICAgICBbIFsgcmVzaXplLCB0aHJvdHRsZWRSZXNpemVMaXN0ZW5lciBdIF0sXG4gICAgICApXG4gIH0sXG59KVxuIl19